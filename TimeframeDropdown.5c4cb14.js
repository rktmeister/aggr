import{ax as e,T as t,a6 as i,n as a}from"./index.5c4cb14.js";const s=a({name:"TimeframeDropdown",components:{TimeframeInput:e,ToggableSection:t},props:{paneId:{type:String,required:!0},value:{type:HTMLButtonElement,default:null}},data:()=>({editing:!1,typeaheadTimeframe:null}),computed:{timeframes(){return this.$store.state.settings.timeframes},favoriteTimeframes(){return this.$store.state.settings.favoriteTimeframes},groups(){const e=["seconds","minutes","hours","ticks","bps","vol"];return this.timeframes.map((e=>{const t=e.value[e.value.length-1];let i;return i="t"===t?3:"b"===t?4:"v"===t?5:e.value>=3600?2:e.value>=60?1:0,{...e,weight:i}})).sort(((e,t)=>e.weight!==t.weight?e.weight-t.weight:parseFloat(e.value)-parseFloat(t.value))).reduce(((t,i)=>{let a=t[t.length-1];return(!a||a.weight<i.weight)&&(a=t[t.push({title:e[i.weight],weight:i.weight,timeframes:[]})-1]),a.timeframes.push(i),t}),[])}},methods:{toggleFavoriteTimeframe(e){this.$store.commit("settings/TOGGLE_FAVORITE_TIMEFRAME",e)},addTimeframe(e,t){e&&(this.$store.commit(this.paneId+"/SET_TIMEFRAME",e),t&&!this.timeframes.find((t=>t.value==e))&&(this.$store.commit("settings/ADD_TIMEFRAME",e),this.$store.dispatch("app/showNotice",{title:`Added timeframe ${i(e)} to the list !`})))},removeTimeframe(e){this.$store.commit("settings/REMOVE_TIMEFRAME",e)},toggleEdit(){this.editing=!this.editing},onInput(e){this.typeaheadTimeframe=e}}},(function(){var e=this,t=e._self._c;return t("dropdown",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("div",{staticClass:"timeframe-dropdown"},[t("div",{staticClass:"dropdown-item timeframe-dropdown__header",on:{click:function(e){e.stopPropagation()}}},[t("timeframe-input",{staticClass:"timeframe-dropdown__input",attrs:{placeholder:"ex 1m"},on:{input:e.onInput,submit:e.addTimeframe}}),e.typeaheadTimeframe&&e.typeaheadTimeframe.value?t("div",{staticClass:"text-nowrap text-monospace text-muted"},[e._v(" ~ "+e._s(e.typeaheadTimeframe.label)+" ")]):e._e(),e.typeaheadTimeframe?t("button",{staticClass:"btn -text",attrs:{type:"button"},on:{click:function(t){return e.addTimeframe(e.typeaheadTimeframe.value,!0)}}},[t("i",{staticClass:"icon-save"})]):t("button",{staticClass:"btn -text",attrs:{type:"button"},on:{click:e.toggleEdit}},[t("i",{class:e.editing?"icon-cross":"icon-edit"})])],1),e._l(e.groups,(function(i){return t("ToggableSection",{key:i.title,attrs:{id:`timeframe-${i.title}`,title:i.title,small:""}},e._l(i.timeframes,(function(i){return t("button",{key:i.value,staticClass:"dropdown-item dropdown-item--space-between timeframe-option",attrs:{type:"button"},on:{click:function(t){return e.$store.dispatch(`${e.paneId}/setTimeframe`,i.value)}}},[t("span",[e._v(e._s(i.label))]),e.editing?t("i",{staticClass:"icon-trash",on:{click:function(t){return t.stopPropagation(),e.removeTimeframe(i.value)}}}):t("i",{class:[e.favoriteTimeframes[i.value]&&"icon-star-filled",!e.favoriteTimeframes[i.value]&&"icon-star"],on:{click:function(t){return t.stopPropagation(),e.toggleFavoriteTimeframe(i.value)}}})])})),0)}))],2)])}),[],!1,null,"623c21cf",null,null).exports;export{s as default};
